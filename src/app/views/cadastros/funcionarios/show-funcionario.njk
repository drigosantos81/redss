{% extends 'layout.njk' %}

{% block head %}
  <title>{{funcionario.first_nome}} | REDSS</title>
{% endblock %}

{% block content %}
  <div class="container-fluid">
    <!-- Page Heading -->
    <div class="title-menu">
      <h1 class="h3 mb-2 text-gray-800">{{funcionario.first_nome}} {{funcionario.sobrenome}}</h1>
      <a class="cadastro-voltar" href="/cadastros/funcionarios">Voltar</a>
    </div>
    <!-- DataTales Example -->
    <div class="card shadow mb-4">
      <div class="card-header py-3 edit-data-registro">
        <h6 class="m-0 font-weight-bold text-primary"><strong>FUNÇÃO: </strong>{{funcionario.funcao}}</h6>
        
        <div class="menu-edita-cadastro">
          <p id="open-modal-dependente" class="botoes-edita-registro" onclick="modalDependente()">Incluir Dependente</p>
          
          <button class="edita-registro-doc" onclick="abreJanela()">Documentos</button>
          {# botoes-edita-registro #}
          <a class="edita-registro" href="/cadastros/funcionarios/edit-funcionario/{{funcionario.id}}/editar">Editar</a>
          
          <input id="func-dependente-id" type="hidden" name="id_dep" value="{{dependente_func}}">
        </div>
      </div>

      <div class="card-body">
        <div> {# CENTRO DE CUSTO #}
          <span class="rotulo">
            <strong>Centro de Custo: </strong>
          </span>
          <label class="label-all">{{funcionario.cencusto}}</label>
        </div>

        <div> {# DATA ADMISSÃO #}
          <span class="rotulo">
            <strong>Admissão: </strong>
          </span>
          <label class="label-all">{{funcionario.data_admissao}}</label>
        </div>

        <div> {# SALÁRIO #}
          <span class="rotulo">
            <strong>Salário: </strong>
          </span>
          <label class="label-all">{{funcionario.salario}}</label>
        </div>

        <div> {# TIPO CONTRATO #}
          <span class="rotulo">
            <strong>Tipo do Contrato: </strong>
          </span>
          <label class="label-all">{{funcionario.tipo_contrato}}</label>
        </div>
        <!-- Divider -->
        <hr class="sidebar-divider my-0">

        <div> {# CPF #}
          <span class="rotulo">
            <strong>CPF: </strong>
          </span>
          <label class="label-all">{{funcionario.cpf}}</label>
        </div>

        <div> {# RG #}
          <span class="rotulo">
            <strong>RG: </strong>
          </span>
          <label class="label-all">{{funcionario.rg}}</label>
        </div>

        <div> {# PIS #}
          <span class="rotulo">
            <strong>PIS: </strong>
          </span>
          <label class="label-all">{{funcionario.pis}}</label>
        </div>

        <div> {# CTPS #}
          <span class="rotulo">
            <strong>CTPS: </strong>
          </span>
          <label class="label-all">{{funcionario.ctps}} / <strong>Série: </strong>{{funcionario.serie_ctps}} / <strong>UF: </strong>{{funcionario.uf_ctps}}</label>
        </div>

        <div> {# TÍTULO ELEITOR #}
          <span class="rotulo">
            <strong>Título de Eleitor: </strong>
          </span>
          <label class="label-all">{{funcionario.titulo_eleitor}} / <strong>Zona: </strong>{{funcionario.zona_titulo}} / <strong>Seção: </strong>{{funcionario.zona_titulo}}</label>
        </div>
        <!-- Divider -->
        <hr class="sidebar-divider my-0">

        <div> {# NASCIMENTO #}
          <span class="rotulo">
            <strong>Nascimento: </strong>
          </span>
          <label class="label-all">{{funcionario.nascimento}} <strong>Idade: </strong>{{funcionario.idade}}</label>
        </div>

        <div> {# NACIONALIDADE #}
          <span class="rotulo">
            <strong>Nacionalidade: </strong>
          </span>
          <label class="label-all">{{funcionario.nacionalidade}}</label>
        </div>

        <div> {# NATURAL DE #}
          <span class="rotulo">
            <strong>Natural de: </strong>
          </span>
          <label class="label-all">{{funcionario.naturalidade_id}} / {{funcionario.uf}}</label>
        </div>
        <!-- Divider -->
        <hr class="sidebar-divider my-0">

        <div> {# FILIAÇÃO #}
          <span class="rotulo">
            <strong>Filiação</strong>
          </span>
          <p></p>
        </div>

        <div> {# MÃE #}
          <span class="rotulo">
            <strong>Nome da Mãe: </strong>
          </span>
          <label class="label-all">{{funcionario.nome_mae}}</label>
        </div>

        <div> {# PAI #}
          <span class="rotulo">
            <strong>Nome do Pai: </strong>
          </span>
          <label class="label-all">{{funcionario.nome_pai}}</label>
        </div>
        <!-- Divider -->
        <hr class="sidebar-divider my-0">

        <div> {# ENDEREÇO E CONTATO #}
          <span class="rotulo">
            <strong>Endereço e Contatos</strong>
          </span>
          <p></p>
        </div>

        <div> {# TELEFONES #}
          <span class="rotulo">
            <strong>Telefone: </strong>
          </span>
          <label class="label-all">{{ funcionario.telefone[1] }} <strong>Celular: </strong>{{ funcionario.telefone[0] }}</label>
        </div>

        <div> {# CEP #}
          <span class="rotulo">
            <strong>CEP: </strong>
          </span>
          <label class="label-all">{{funcionario.cep}}</label>
        </div>

        <div> {# LOGRADOOURO #}
          <span class="rotulo">
            <strong>Logradouro: </strong>
          </span>
          <label class="label-all">{{funcionario.endereco}}, Nº: {{funcionario.numero_end}}</label>
        </div>

        <div> {# BAIRRO #}
          <span class="rotulo">
            <strong>Bairro: </strong>
          </span>
          <label class="label-all">{{funcionario.bairro}} - Salvador/BA</strong></label>
        </div>
        <!-- Divider -->
        <hr class="sidebar-divider my-0">

        <div> {# ESDADO CIVIL #}
          <span class="rotulo">
            <strong>Estado Civil: </strong>
          </span>
          <label class="label-all">{{funcionario.estado_civil}} <strong>Cônjuge: </strong>{{funcionario.conjuge}}</label>
        </div>
        <!-- Divider -->
        <hr class="sidebar-divider my-0">

        <div> {# DEPENDENTES #}
          <span class="rotulo">
            <strong>Dependentes</strong>
          </span>
          <p></p>
        </div>

        {% for dependente in dependentes %}
          <div class="form-exibe-dependentes"> {# FILHOS #}
            <span class="rotulo">
              <strong>Nome: </strong>
            </span>
            <label class="label-all">{{dependente.nome}}
              <strong>- Nascimento: </strong>{{dependente.nascimento}} 
              <strong>- CPF: </strong>{{dependente.cpf}}
            </label>
            <span>
              <form id="form-delete" action="/cadastros/funcionarios?_method=DELETE" method="post">
                <input type="hidden" name="id" value="{{ dependente.id_dep }}">
                <button form="form-delete" class="delete-dependente" type="submit" onclick="alertDelete()">X</button>
              </form> {# delete-crud-button #}
            </span>
          </div>

        {% endfor %}
        <!-- Divider -->
        <hr class="sidebar-divider my-0 bar-divider-voltar">

        <div> {# DADOS DA CONTA #}
          <span class="rotulo">
            <strong>Dados da conta para pagamento</strong>
          </span>
          <p></p>
        </div>

        <div> {# CONTA #}
          <span class="rotulo">
            <strong>Banco: </strong>
          </span>
          <label class="label-all">{{ funcionario.dados_conta[0] }} 
            <strong>Agência: </strong>{{ funcionario.dados_conta[1] }} 
            <strong>Tipo: </strong>{{ funcionario.dados_conta[2] }} 
            <strong>Conta: </strong>{{ funcionario.dados_conta[3] }} </label>
        </div>

        <!-- Divider -->
        <hr class="sidebar-divider my-0 bar-divider-voltar">

        <a class="edita-registro" href="/cadastros/funcionarios">Voltar</a>
      </div>
    </div>
    
    {% include 'parts/modal-dependente.njk' %}
  </div>
  <!-- /.container-fluid -->
  
  <script>  
    function abreJanela() {
      const idPaiDependente = document.querySelector('#func-dependente-id');
      const janela = window.open(`/cadastros/funcionarios/dependentes/dependentes`, "_blank", "Width=820,Height=485");
    }

    function fechaJanela() {
      const janela = window.close();
    }
  </script>
{% endblock %}